<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Argyll · Goal-Driven Orchestrator</title>
  <link rel="stylesheet" href="./style.css" />
  <link rel="icon" href="./img/argyll-logo.svg" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css" />
</head>

<body>
  <header>
    <div class="nav">
      <div class="brand">
        <img src="./img/argyll-logo.svg" alt="Argyll logo" />
        <span>Argyll</span>
      </div>
      <nav class="nav-links">
        <a href="#overview">Overview</a>
        <a href="#quickstart">Quickstart</a>
        <a href="#step-spec">Step Spec</a>
        <a href="https://github.com/kode4food/argyll" target="_blank" rel="noreferrer">GitHub</a>
      </nav>
    </div>
  </header>

  <main class="main">
    <section id="overview" class="hero hero-grid">
      <div class="hero-content">
        <h1>Plan and Execute Only What Matters</h1>
        <p>
          Argyll walks backward from your goals to build a minimal execution plan.
          It runs only the required steps, in dependency order, with live visibility and health checks
        </p>
        <div class="hero-actions">
          <a class="button" href="#quickstart">Quickstart</a>
          <a class="button secondary" href="https://github.com/kode4food/argyll">View on GitHub</a>
        </div>
      </div>
      <div class="hero-media">
        <img src="./img/argyll-logo.svg" alt="Argyll logo" />
      </div>
    </section>

    <section>
      <img class="screenshot" src="./img/screenshot.png" alt="Argyll UI screenshot" />
    </section>

    <section id="quickstart">
      <h2 class="section-title">Quickstart</h2>
      <div class="two-col">
        <div class="card">
          <div class="heading-line"><strong>Register a Step</strong> · Post your step spec (see example JSON below)</div>
          <div class="snippet-block">
            <div class="code-snippet">
              <button class="copy-btn" data-copy="#curl-step-register" data-label="⧉" aria-label="Copy register step">⧉</button>
              <pre id="curl-step-register"><code class="language-bash">curl -X POST http://localhost:8080/engine/step \
  -H "Content-Type: application/json" \
  -d @step.json</code></pre>
            </div>
          </div>

          <div class="heading-line"><strong>Check Health</strong> · All steps and a specific step</div>
          <div class="snippet-block">
            <div class="code-snippet">
              <button class="copy-btn" data-copy="#curl-health" data-label="⧉" aria-label="Copy health checks">⧉</button>
              <pre id="curl-health"><code class="language-bash">curl http://localhost:8080/engine/health
curl http://localhost:8080/engine/health/send-email</code></pre>
            </div>
          </div>

          <div class="heading-line"><strong>Delete a Step</strong> · Retire it when it’s no longer needed</div>
          <div class="snippet-block">
            <div class="code-snippet">
              <button class="copy-btn" data-copy="#curl-step-delete" data-label="⧉" aria-label="Copy delete step">⧉</button>
              <pre id="curl-step-delete"><code class="language-bash">curl -X DELETE http://localhost:8080/engine/step/send-email</code></pre>
            </div>
          </div>
        </div>
        <div class="card">
          <div class="heading-line"><strong>Preview a Plan</strong> · See what runs for goal "send-email"</div>
          <div class="snippet-block">
            <div class="code-snippet">
              <button class="copy-btn" data-copy="#curl-plan" data-label="⧉" aria-label="Copy plan curl">⧉</button>
              <pre id="curl-plan"><code class="language-bash">curl -X POST http://localhost:8080/engine/plan \
  -H "Content-Type: application/json" \
  -d '{"goals":["send-email"],"state":{}}'</code></pre>
            </div>
          </div>

          <div class="heading-line"><strong>Start a Flow</strong> · Kick off using that goal set</div>
          <div class="snippet-block">
            <div class="code-snippet">
              <button class="copy-btn" data-copy="#curl-start-flow" data-label="⧉" aria-label="Copy start flow">⧉</button>
              <pre id="curl-start-flow"><code class="language-bash">curl -X POST http://localhost:8080/engine/flow \
  -H "Content-Type: application/json" \
  -d '{"id":"welcome-flow","goals":["send-email"],"state":{}}'</code></pre>
            </div>
          </div>

          <div class="heading-line"><strong>Inspect Flow State</strong> · Fetch current state/events</div>
          <div class="snippet-block">
            <div class="code-snippet">
              <button class="copy-btn" data-copy="#curl-flow-state" data-label="⧉" aria-label="Copy flow state">⧉</button>
              <pre id="curl-flow-state"><code class="language-bash">curl http://localhost:8080/engine/flow/welcome-flow</code></pre>
            </div>
          </div>
        </div>
      </div>
      <p class="content">
        Full OpenAPI specs live in <a href="https://github.com/kode4food/argyll/tree/main/docs/api" target="_blank"
          rel="noreferrer">docs/api</a>.
        Read more in the <a href="https://github.com/kode4food/argyll" target="_blank" rel="noreferrer">Argyll GitHub
          repository</a>
      </p>
    </section>

      <section id="step-spec">
        <h2 class="section-title">Step Definition Example</h2>
        <div class="card">
          <p class="content">
            Register steps that declare inputs/outputs. Choose one or more goal steps—Argyll plans the rest
          </p>
          <div class="code-snippet">
            <button class="copy-btn" data-copy="#step-json" data-label="⧉" aria-label="Copy step JSON">⧉</button>
            <pre id="step-json"><code class="language-json">{
  "id": "send-email",
  "type": "async",
  "http": { "url": "https://api.example.com/send-email" },
  "attributes": {
    "recipient": { "role": "required", "type": "string" },
    "body": { "role": "optional", "type": "string", "default": "\"Hello!\"" },
    "message_id": { "role": "output", "type": "string" }
  }
}</code></pre>
          </div>
          <p class="content">
            Start a flow with your goals, monitor via WebSocket at <code>/engine/ws</code>, and edit steps live in the UI
          </p>
        </div>
      </section>
  </main>

  <footer>
    <div>Argyll · Goal-Driven Orchestrator</div>
    <div>Built with plain HTML & CSS · <a href="https://github.com/kode4food/argyll">Source</a></div>
  </footer>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
  <script>
    hljs.highlightAll();
    document.querySelectorAll(".copy-btn").forEach((btn) => {
      btn.addEventListener("click", () => {
        const target = btn.getAttribute("data-copy");
        const el = document.querySelector(target);
        if (!el) return;
        const text = el.innerText;
        navigator.clipboard?.writeText(text).then(() => {
          const original = btn.dataset.label || btn.textContent;
          btn.textContent = "✔";
          setTimeout(() => (btn.textContent = original), 1200);
        });
      });
    });
  </script>
</body>

</html>
